{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["github>bitwarden/renovate-config"], // Extends our default configuration for pinned dependencies
  enabledManagers: ["cargo", "github-actions", "npm"],
  packageRules: [
    {
      // Ignore all patch updates for GitHub Actions
      matchManagers: ["github-actions"],
      updateTypes: ["patch"],
      enabled: false,
    },
    {
      // Group all build/test/lint workflows for GitHub Actions together for Platform
      // Since they are code owners we don't need to assign a review team in Renovate
      // Any changes here should also be reflected in CODEOWNERS
      groupName: "github-action minor",
      matchManagers: ["github-actions"],
      matchFileNames: [
        "./github/workflows/automatic-issue-responses.yml",
        "./github/workflows/automatic-pull-request-responses.yml",
        "./github/workflows/build-browser.yml",
        "./github/workflows/build-cli.yml",
        "./github/workflows/build-desktop.yml",
        "./github/workflows/build-web.yml",
        "./github/workflows/chromatic.yml",
        "./github/workflows/crowdin-pull.yml",
        "./github/workflows/enforce-labels.yml",
        "./github/workflows/lint.yml",
        "./github/workflows/locales-lint.yml",
        "./github/workflows/repository-management.yml",
        "./github/workflows/scan.yml",
        "./github/workflows/stale-bot.yml",
        "./github/workflows/test.yml",
        "./github/workflows/version-auto-bump.yml",
      ],
      matchUpdateTypes: ["minor"],
      commitMessagePrefix: "[deps] Platform:",
    },
    {
      // Group all release-related workflows for GitHub Actions together for BRE
      // Since they are code owners we don't need to assign a review team in Renovate
      // Any changes here should also be reflected in CODEOWNERS
      groupName: "github-action minor",
      matchManagers: ["github-actions"],
      matchFileNames: [
        "./github/workflows/brew-bump-desktop.yml",
        "./github/workflows/deploy-web.yml",
        "./github/workflows/publish-cli.yml",
        "./github/workflows/publish-desktop.yml",
        "./github/workflows/publish-web.yml",
        "./github/workflows/retrieve-current-desktop-rollout.yml",
        "./github/workflows/staged-rollout-desktop.yml",
        "./github/workflows/release-cli.yml",
        "./github/workflows/release-desktop-beta.yml",
        "./github/workflows/release-desktop.yml",
        "./github/workflows/release-web.yml",
      ],
      matchUpdateTypes: ["minor"],
      commitMessagePrefix: "[deps] BRE:",
    },
    {
      // The desktop_native module is code-owned by Platform, so we're applying the Platform
      // prefix to ensure that the PR has the right prefix on it for automation
      matchManagers: ["cargo"],
      commitMessagePrefix: "[deps] Platform:",
    },
    {
      // Disable major and minor updates for TypeScript and Zone.js because they are managed by Angular
      matchPackageNames: ["typescript", "zone.js"],
      matchUpdateTypes: ["major", "minor"],
      description: "Determined by Angular",
      enabled: false,
    },
    {
      // Renovate should manage patch updates for TypeScript and Zone.js, despite ignoring major and minor
      matchPackageNames: ["typescript", "zone.js"],
      matchUpdateTypes: "patch",
    },
    {
      // We need to update all the Jest-related packages together, to reduce PR noise
      groupName: "jest",
      matchPackageNames: ["@types/jest", "jest", "ts-jest", "jest-preset-angular"],
    },
    {
      // We want to group all napi-related packages together for all updates, to reduce PR noise
      groupName: "napi",
      matchPackageNames: ["napi", "napi-build", "napi-derive"],
    },
    {
      // We want to group all macOS/iOS binding-related packages together for all updates, to reduce PR noise
      groupName: "macOS/iOS bindings",
      matchPackageNames: ["core-foundation", "security-framework", "security-framework-sys"],
    },
    {
      // We want to group all zbus-related packages together for all updates, to reduce PR noise
      groupName: "zbus",
      matchPackageNames: ["zbus", "zbus_polkit"],
    },
    {
      matchPackageNames: [
        "base64-loader",
        "buffer",
        "bufferutil",
        "core-js",
        "css-loader",
        "html-loader",
        "mini-css-extract-plugin",
        "postcss",
        "postcss-loader",
        "process",
        "sass",
        "sass-loader",
        "style-loader",
        "ts-loader",
        "url",
        "util",
      ],
      description: "Admin Console owned dependencies",
      commitMessagePrefix: "[deps] AC:",
      reviewers: ["team:team-admin-console-dev"],
    },
    {
      matchPackageNames: ["qrious"],
      description: "Auth owned dependencies",
      commitMessagePrefix: "[deps] Auth:",
      reviewers: ["team:team-auth-dev"],
    },
    {
      matchPackageNames: [
        "@angular-eslint/schematics",
        "angular-eslint",
        "eslint-config-prettier",
        "eslint-import-resolver-typescript",
        "eslint-plugin-import",
        "eslint-plugin-rxjs-angular",
        "eslint-plugin-rxjs",
        "eslint-plugin-storybook",
        "eslint-plugin-tailwindcss",
        "eslint",
        "husky",
        "lint-staged",
        "typescript-eslint",
      ],
      description: "Architecture owned dependencies",
      commitMessagePrefix: "[deps] Architecture:",
      reviewers: ["team:dept-architecture"],
    },
    {
      matchPackageNames: [
        "@angular-eslint/eslint-plugin-template",
        "@angular-eslint/eslint-plugin",
        "@angular-eslint/schematics",
        "@angular-eslint/template-parser",
        "@typescript-eslint/eslint-plugin",
        "@typescript-eslint/parser",
        "eslint-config-prettier",
        "eslint-import-resolver-typescript",
        "eslint-plugin-import",
        "eslint-plugin-rxjs-angular",
        "eslint-plugin-rxjs",
        "eslint-plugin-storybook",
        "eslint-plugin-tailwindcss",
        "eslint",
        "husky",
        "lint-staged",
      ],
      groupName: "Linting minor-patch",
      matchUpdateTypes: ["minor", "patch"],
    },
    {
      matchPackageNames: [
        "@emotion/css",
        "@webcomponents/custom-elements",
        "concurrently",
        "cross-env",
        "del",
        "lit",
        "nord",
        "patch-package",
        "prettier",
        "prettier-plugin-tailwindcss",
        "rimraf",
        "@storybook/web-components-webpack5",
        "tabbable",
        "tldts",
        "wait-on",
      ],
      description: "Autofill owned dependencies",
      commitMessagePrefix: "[deps] Autofill:",
      reviewers: ["team:team-autofill-dev"],
    },
    {
      matchPackageNames: ["braintree-web-drop-in"],
      description: "Billing owned dependencies",
      commitMessagePrefix: "[deps] Billing:",
      reviewers: ["team:team-billing-dev"],
    },
    {
      matchPackageNames: [
        "@babel/core",
        "@babel/preset-env",
        "@bitwarden/sdk-internal",
        "@electron/fuses",
        "@electron/notarize",
        "@electron/rebuild",
        "@ngtools/webpack",
        "@types/chrome",
        "@types/firefox-webext-browser",
        "@types/glob",
        "@types/jquery",
        "@types/lowdb",
        "@types/node",
        "@types/node-forge",
        "@types/node-ipc",
        "@yao-pkg/pkg",
        "babel-loader",
        "browserslist",
        "copy-webpack-plugin",
        "electron",
        "electron-builder",
        "electron-log",
        "electron-reload",
        "electron-store",
        "electron-updater",
        "html-webpack-injector",
        "html-webpack-plugin",
        "json5",
        "lowdb",
        "node-forge",
        "node-ipc",
        "pkg",
        "rxjs",
        "tsconfig-paths-webpack-plugin",
        "type-fest",
        "typescript",
        "typescript-strict-plugin",
        "webpack",
        "webpack-cli",
        "webpack-dev-server",
        "webpack-node-externals",
      ],
      description: "Platform owned dependencies",
      commitMessagePrefix: "[deps] Platform:",
      reviewers: ["team:team-platform-dev"],
    },
    {
      matchPackageNames: [
        "@angular-devkit/build-angular",
        "@angular/animations",
        "@angular/cdk",
        "@angular/cli",
        "@angular/common",
        "@angular/compiler-cli",
        "@angular/compiler",
        "@angular/core",
        "@angular/forms",
        "@angular/platform-browser-dynamic",
        "@angular/platform-browser",
        "@angular/platform",
        "@angular/router",
        "@compodoc/compodoc",
        "@ng-select/ng-select",
        "@storybook/addon-a11y",
        "@storybook/addon-actions",
        "@storybook/addon-designs",
        "@storybook/addon-essentials",
        "@storybook/addon-interactions",
        "@storybook/addon-links",
        "@storybook/angular",
        "@storybook/manager-api",
        "@storybook/theming",
        "@typescript-eslint/utils",
        "@typescript-eslint/rule-tester",
        "@types/react",
        "autoprefixer",
        "bootstrap",
        "chromatic",
        "jquery",
        "ngx-toastr",
        "popper.js",
        "react",
        "react-dom",
        "remark-gfm",
        "storybook",
        "tailwindcss",
        "zone.js",
      ],
      description: "UI Foundation owned dependencies",
      commitMessagePrefix: "[deps] UI Foundation:",
      reviewers: ["team:team-ui-foundation"],
    },
    {
      matchPackageNames: [
        "@types/jest",
        "jest-junit",
        "jest-mock-extended",
        "jest-preset-angular",
        "jest-diff",
        "ts-jest",
      ],
      description: "Secrets Manager owned dependencies",
      commitMessagePrefix: "[deps] SM:",
      reviewers: ["team:team-secrets-manager-dev"],
    },
    {
      matchPackageNames: [
        "@microsoft/signalr-protocol-msgpack",
        "@microsoft/signalr",
        "@types/jsdom",
        "@types/papaparse",
        "@types/zxcvbn",
        "jsdom",
        "jszip",
        "oidc-client-ts",
        "papaparse",
        "utf-8-validate",
        "zxcvbn",
      ],
      description: "Tools owned dependencies",
      commitMessagePrefix: "[deps] Tools:",
      reviewers: ["team:team-tools-dev"],
    },
    {
      matchPackageNames: [
        "@koa/multer",
        "@koa/router",
        "@types/inquirer",
        "@types/koa",
        "@types/koa__multer",
        "@types/koa__router",
        "@types/koa-bodyparser",
        "@types/koa-json",
        "@types/lunr",
        "@types/node-fetch",
        "@types/proper-lockfile",
        "@types/retry",
        "chalk",
        "commander",
        "form-data",
        "https-proxy-agent",
        "inquirer",
        "koa",
        "koa-bodyparser",
        "koa-json",
        "lunr",
        "multer",
        "node-fetch",
        "open",
        "proper-lockfile",
        "qrcode-parser",
      ],
      description: "Vault owned dependencies",
      commitMessagePrefix: "[deps] Vault:",
      reviewers: ["team:team-vault-dev"],
    },
    {
      matchPackageNames: ["@types/argon2-browser", "argon2", "argon2-browser", "big-integer"],
      description: "Key Management owned dependencies",
      commitMessagePrefix: "[deps] KM:",
      reviewers: ["team:team-key-management-dev"],
    },
  ],
  ignoreDeps: ["@types/koa-bodyparser", "bootstrap", "node-ipc", "node", "npm"],
}
